import vendor/raylib/raylib

-- Simple rainbow test - draws all the color constants

def main() do
    InitWindow(800, 600, "Bern Raylib - Color Test")
    SetTargetFPS(60)
    
    print("===============================")
    print("BERN RAYLIB COLOR TEST")
    print("Testing all color constants...")
    print("If you see a rainbow of colors")
    print("with NO BLINKING, the FFI fix")
    print("is working perfectly!")
    print("===============================")
    
    for !WindowShouldClose() do
        BeginDrawing()
        
        -- Background
        ClearBackground(RL_RAYWHITE)
        
        -- Title
        DrawText("COLOR CONSTANT TEST", 250, 30, 30, RL_BLACK)
        DrawText("All colors should be stable (no blinking!)", 180, 70, 20, RL_DARKGRAY)
        
        -- Draw colored rectangles testing each color constant
        y_pos = 120
        DrawRectangle(50, y_pos, 150, 40, RL_RED)
        DrawText("RL_RED", 220, y_pos + 10, 20, RL_RED)
        
        y_pos = y_pos + 50
        DrawRectangle(50, y_pos, 150, 40, RL_ORANGE)
        DrawText("RL_ORANGE", 220, y_pos + 10, 20, RL_ORANGE)
        
        y_pos = y_pos + 50
        DrawRectangle(50, y_pos, 150, 40, RL_YELLOW)
        DrawText("RL_YELLOW", 220, y_pos + 10, 20, RL_YELLOW)
        
        y_pos = y_pos + 50
        DrawRectangle(50, y_pos, 150, 40, RL_GREEN)
        DrawText("RL_GREEN", 220, y_pos + 10, 20, RL_GREEN)
        
        y_pos = y_pos + 50
        DrawRectangle(50, y_pos, 150, 40, RL_BLUE)
        DrawText("RL_BLUE", 220, y_pos + 10, 20, RL_BLUE)
        
        y_pos = y_pos + 50
        DrawRectangle(50, y_pos, 150, 40, RL_PURPLE)
        DrawText("RL_PURPLE", 220, y_pos + 10, 20, RL_PURPLE)
        
        -- Right column
        y_pos = 120
        DrawRectangle(450, y_pos, 150, 40, RL_PINK)
        DrawText("RL_PINK", 620, y_pos + 10, 20, RL_PINK)
        
        y_pos = y_pos + 50
        DrawRectangle(450, y_pos, 150, 40, RL_MAROON)
        DrawText("RL_MAROON", 620, y_pos + 10, 20, RL_MAROON)
        
        y_pos = y_pos + 50
        DrawRectangle(450, y_pos, 150, 40, RL_GOLD)
        DrawText("RL_GOLD", 620, y_pos + 10, 20, RL_GOLD)
        
        y_pos = y_pos + 50
        DrawRectangle(450, y_pos, 150, 40, RL_LIME)
        DrawText("RL_LIME", 620, y_pos + 10, 20, RL_LIME)
        
        y_pos = y_pos + 50
        DrawRectangle(450, y_pos, 150, 40, RL_SKYBLUE)
        DrawText("RL_SKYBLUE", 620, y_pos + 10, 20, RL_SKYBLUE)
        
        y_pos = y_pos + 50
        DrawRectangle(450, y_pos, 150, 40, RL_VIOLET)
        DrawText("RL_VIOLET", 620, y_pos + 10, 20, RL_VIOLET)
        
        -- Bottom status
        DrawText("Press ESC to exit", 300, 550, 20, RL_DARKGRAY)
        
        -- FPS counter
        DrawFPS(10, 10)
        
        EndDrawing()
    end
    
    print("===============================")
    print("TEST COMPLETE!")
    print("If all colors displayed without")
    print("blinking or flickering, then")
    print("the FFI struct-by-value fix is")
    print("working correctly!")
    print("===============================")
    
    CloseWindow()
end

main()